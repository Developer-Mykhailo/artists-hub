{"version":3,"file":"index.js","sources":["../src/js/artists/create-markup-artists.js","../src/js/artists/artists-api.js","../src/js/artists/artists.js","../src/js/mobile-menu/mobile-menu.js"],"sourcesContent":["export const loaderElem = document.querySelector('.loader');\nexport const btnLoadMoreElem = document.querySelector('.js-load-more');\n\nexport function createArtistsMarkup(arr) {\n  const markup = arr\n    .map(({ strArtist, strBiographyEN, strArtistThumb, _id, genres }) => {\n      const flattenedGenres = genres\n        .flatMap(genre => genre.split('/'))\n        .map(gen => gen.trim());\n\n      const uniqueGenres = [...new Set(flattenedGenres)];\n\n      const genresMarkup = uniqueGenres\n        .map(genre => `<span class=\"artists-genre\">${genre}</span>`)\n        .join('');\n\n      return `\n        <li class=\"artists-item\">\n            <div class=\"artists-box-img\">\n              <img\n                data-id=\"${_id}\"\n                src=\"${strArtistThumb}\"\n                alt=\"${strArtist}\"\n                class=\"artists-img\"\n              />\n            </div>\n\n            <div class=\"artists-box-genres\">${genresMarkup}</div>\n\n            <div class=\"artists-content\">\n              <h4 class=\"artists-name\">${strArtist}</h4>\n              <p class=\"artists-descr\">${strBiographyEN}</p>\n              <button\n                type=\"button\"\n                class=\"artists-learn-more-btn\"\n                aria-label=\"button to learn more\"\n              >\n                Learn More\n                <svg class=\"icon-caret-right\" width=\"24\" height=\"24\">\n                  <use href=\"../img/sprite.svg#icon-caret-right\"></use>\n                </svg>\n              </button>\n            </div>\n          </li>\n    `;\n    })\n    .join('');\n\n  const artistsList = document.querySelector('.artists-list');\n\n  artistsList.insertAdjacentHTML('beforeend', markup);\n}\n\n//---------------------------------------------------------------\nexport function showLoader() {\n  loaderElem.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loaderElem.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  btnLoadMoreElem.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  btnLoadMoreElem.classList.add('hidden');\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst imagesOnPage = 8;\nlet currentPage = 1;\n\nexport function getCurrentPage() {\n  return currentPage;\n}\n\nexport function setCurrentPage(newPage) {\n  currentPage = newPage;\n}\n\nexport async function getArtists(\n  endpoint = 'artists',\n  params = { limit: imagesOnPage, page: currentPage }\n) {\n  const BASE_URL = 'https://sound-wave.b.goit.study/api/';\n  const url = `${BASE_URL}${endpoint}`;\n\n  try {\n    const response = await axios.get(url, { params });\n    return response.data;\n  } catch (error) {\n    iziToast.warning({\n      message: `Request error: ${error.message}`,\n      position: 'center',\n    });\n    throw error;\n  }\n}\n","import {\n  createArtistsMarkup,\n  hideLoader,\n  hideLoadMoreButton,\n  showLoader,\n  showLoadMoreButton,\n  btnLoadMoreElem,\n} from './create-markup-artists';\nimport { getArtists, getCurrentPage, setCurrentPage } from './artists-api';\nimport iziToast from 'izitoast';\n\nlet totalArtists = 0;\n\nasync function showArtistsOnPage() {\n  try {\n    showLoader();\n    const data = await getArtists();\n    totalArtists = data.totalArtists;\n\n    if (data.artists.length === 0) {\n      iziToast.warning({\n        message: 'Sorry, but no artists were found',\n        position: 'center',\n      });\n    }\n\n    createArtistsMarkup(data.artists);\n\n    showLoadMoreButton();\n  } catch (error) {\n    iziToast.warning({\n      message: 'Sorry, but no artists were found',\n      position: 'center',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nshowArtistsOnPage();\n\nbtnLoadMoreElem.addEventListener('click', async () => {\n  const page = getCurrentPage();\n  setCurrentPage(page + 1);\n\n  let maxPage = Math.ceil(totalArtists / page);\n\n  if (page >= maxPage) {\n    hideLoadMoreButton();\n    return;\n  }\n\n  hideLoadMoreButton();\n  showLoader();\n\n  await showArtistsOnPage();\n  hideLoader();\n});\n\n//---------------------------------------------------------------\n","/* Mobile menu open */\ndocument.addEventListener('DOMContentLoaded', () => {\n  function initializeMobileMenu() {\n    const openMenuBtn = document.querySelector('.js-mobile-menu');\n    const closeMenuBtn = document.querySelector('.js-mobile-close-menu');\n    const mobileMenu = document.querySelector('.mobile-menu');\n    const overlay = document.querySelector('.menu-mobile-overlay');\n    const menuLinks = document.querySelectorAll('.mobile-menu a[href^=\"#\"]');\n\n    if (!openMenuBtn || !closeMenuBtn || !mobileMenu || !overlay) {\n      console.error('One or more mobile menu elements not found. Ensure selectors .js-mobile-menu, .js-mobile-close-menu, .mobile-menu, and .menu-mobile-overlay exist.');\n      return;\n    }\n\n    const openMobileMenu = () => {\n      mobileMenu.classList.add('is-open');\n      overlay.classList.add('is-active');\n      document.body.style.overflow = 'hidden';\n      mobileMenu.removeAttribute('inert');\n      mobileMenu.hidden = false;\n    };\n\n    const closeMobileMenu = () => {\n      mobileMenu.classList.remove('is-open');\n      overlay.classList.remove('is-active');\n      document.body.style.overflow = '';\n      mobileMenu.setAttribute('inert', '');\n      mobileMenu.hidden = true;\n    };\n\n    openMenuBtn.addEventListener('click', openMobileMenu);\n\n    closeMenuBtn.addEventListener('click', closeMobileMenu);\n\n    overlay.addEventListener('click', closeMobileMenu);\n\n    document.addEventListener('keydown', (event) => {\n      if (event.key === 'Escape' && mobileMenu.classList.contains('is-open')) {\n        closeMobileMenu();\n      }\n    });\n\n    menuLinks.forEach(link => {\n      link.addEventListener('click', closeMobileMenu);\n    });\n\n    mobileMenu.setAttribute('inert', '');\n    mobileMenu.hidden = true;\n  }\n\n  initializeMobileMenu();\n});"],"names":["loaderElem","btnLoadMoreElem","createArtistsMarkup","arr","markup","strArtist","strBiographyEN","strArtistThumb","_id","genres","flattenedGenres","genre","gen","genresMarkup","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","imagesOnPage","currentPage","getCurrentPage","setCurrentPage","newPage","getArtists","endpoint","params","url","axios","error","iziToast","totalArtists","showArtistsOnPage","data","page","maxPage","initializeMobileMenu","openMenuBtn","closeMenuBtn","mobileMenu","overlay","menuLinks","openMobileMenu","closeMobileMenu","event","link"],"mappings":"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"}